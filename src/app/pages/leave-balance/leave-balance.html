<div class="container py-4">
	<div class="d-flex justify-content-between align-items-center mb-3">
		<div>
			<h4 class="mb-0">Leave Balances</h4>
			<small class="text-muted">Overview of leave balances by employee</small>
		</div>
		<div>
			<!-- The actual opening of the modal will be handled from the component (ViewChild). -->
			<button type="button" class="btn btn-primary" (click)="openModal()">New Leave</button>
		</div>
	</div>

	<!-- Card list: use cards for each leave balance -->
	<div class="row" id="leaveCardList">
        @for (item of leaveBalanceList; track $index) {
            	<div class="col-md-6 col-lg-4 mb-3">
			<div class="card h-100">
				<div class="card-header d-flex justify-content-between align-items-center">
					<div>
						<strong class="leave-type">{{item.leaveType}}</strong>
						<div class="text-muted small">Employee: {{item.empName}}</div>
					</div>
					<div class="text-right">
						<div class="h5 mb-0">Count</div>
						<div class="small text-muted">{{item.count}}</div>
					</div>
				</div>
				<div class="card-body">
					<p class="mb-1"><strong>Last updated:</strong> {{item.updatedDate |date:'dd-MMM-yy'}}</p>
					<!-- <p class="mb-2 small text-muted">Updated by: Admin</p> -->
					<div class="d-flex">
						<button class="btn btn-sm btn-outline-primary mr-2" title="View"><i class="fa fa-eye"></i> View</button>
						<button class="btn btn-sm btn-outline-secondary mr-2" title="Edit"><i class="fa fa-pencil"></i> Edit</button>
						<button class="btn btn-sm btn-outline-danger" title="Delete"><i class="fa fa-trash"></i> Delete</button>
					</div>
				</div>
			</div>
		</div>
        }
	 
	

	 

		<!-- End of example cards -->
	</div>

	<!-- Bootstrap Modal: form for new/edit leave balance -->
	<!-- The component will open this modal via ViewChild; do not add JS triggers here. -->
	<div class="modal" #fomrModal tabindex="-1" role="dialog" aria-labelledby="leaveModalLabel" aria-hidden="true">
		<div class="modal-dialog modal-md" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title" id="leaveModalLabel">Leave Balance</h5>
					<button type="button" (click)="closeModal()" class="close" data-dismiss="modal" aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
				</div>
				<div class="modal-body">
					<!-- Form fields only (no Angular bindings) -->
					<form>
						 
						<div class="form-group">
							<label for="empId">Employee ID</label>
                            <select class="form-select" [(ngModel)]="newLeaveObj.empId" name="empId">
                                <option value="">Select Leave Type</option>
                                @for (item of allEmpList$ |async; track $index) {
                                     <option [value]="item.empId">{{item.empName}}</option> 
                                } 
                            </select>
							 
						</div>
						<div class="form-group">
							<label for="leaveType">Leave Type</label>
                            <select class="form-select" [(ngModel)]="newLeaveObj.leaveType" name="leaveType">
                                <option value="">Select Leave Type</option>
                                <option value="paidLeave">Paid Leave</option>
                                 <option value="sickLeave">Sick Leave</option>
                            </select>
							 
						</div>
						<div class="form-row">
							<div class="form-group col-md-6">
								<label for="count">Count</label>
								<input type="number" class="form-control" [(ngModel)]="newLeaveObj.count" name="count" min="0" value="0">
							</div> 
						</div> 
					</form>
				</div>
				<div class="modal-footer">
					<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
					<button type="button" (click)="onSaveBalance()" class="btn btn-primary">Save</button>
				</div>
			</div>
		</div>
	</div>
</div>
